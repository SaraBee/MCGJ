{% extends "base.html" %}

{% block title %}Edit Profile{% endblock %}

{% block content %}
<h1>Hi {{user.name}}!</h1>

{% include "general_nav.html" %}

<br>

<form class="edit-form" method="POST" action="/update_profile">
  <label for="nickname">Nickname</label><input type="text" name="nickname" value="{{user.nickname if user.nickname != None}}" required>
  {% if password is not none %}
  <label for="old_password">old password</label><input type="password" name="old_password">
  <label for="new_password">new password</label><input type="password" name="new_password">
  <label for="confirm_password">confirm password</label><input type="password" name="confirm_password">
  {% endif %}
  <input class="action-btn" type="submit" value="Save">
</form>
<br>
<form method="GET" action="/logout"><input class="action-btn" type="submit" value="Log Out"></form>

<div class="dash">
  <div class="unplayed">
    <h2>Previously Played Tracks</h2>
    <ul class="track-list">
      {% if tracks|length > 0 %}
      {% for track in tracks %}
      <li class="{{loop.cycle('odd', 'even')}}">{% with track=track %} {% include "played_user_track_row.html" %} {% endwith %}</li>
      {% endfor %}
      {% else %}
      <li class="odd">No previously played tracks</li>
      {% endif %}
    </ul>
  </div>
</div>

{% endblock %}
